<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text to Speech Converter</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Text to Speech Converter</h1>
      <p class="subtitle">Transform your text into natural-sounding speech</p>
    </header>

    <main class="main-content">
      <div class="text-input-section">
        <label for="textInput" class="label">Enter Your Text</label>
        <textarea
          id="textInput"
          class="text-input"
          placeholder="Type or paste your text here... No word limit!"
          rows="8"
        ></textarea>
        <div class="char-count">
          <span id="charCount">0</span> characters
        </div>
      </div>

      <div class="controls-section">
        <div class="control-group">
          <label for="voiceSelect" class="label">Select Voice</label>
          <select id="voiceSelect" class="select-input">
            <option value="">Loading voices...</option>
          </select>
          <div class="voice-info" id="voiceInfo"></div>
        </div>



        <div class="control-group">
          <label for="languageSelect" class="label">Language / Locale</label>
          <select id="languageSelect" class="select-input">
            <option value="en-US">English (US)</option>
            <option value="en-GB">English (UK)</option>
            <option value="es-ES">Spanish (Spain)</option>
            <option value="fr-FR">French (France)</option>
            <option value="de-DE">German (Germany)</option>
            <option value="it-IT">Italian (Italy)</option>
            <option value="pt-BR">Portuguese (Brazil)</option>
            <option value="ja-JP">Japanese (Japan)</option>
            <option value="ko-KR">Korean (Korea)</option>
            <option value="zh-CN">Chinese (Mandarin)</option>
            <option value="ru-RU">Russian (Russia)</option>
            <option value="ar-SA">Arabic (Saudi Arabia)</option>
            <option value="hi-IN">Hindi (India)</option>
          </select>
          <p class="small">Select the language/locale for the generated speech. Voices will be filtered based on the selected language.</p>
        </div>

        <div class="control-row">
          <div class="control-group">
            <label for="speedControl" class="label">
              Speed: <span id="speedValue">1.0</span>x
            </label>
            <input
              type="range"
              id="speedControl"
              class="slider"
              min="0.5"
              max="2.0"
              step="0.1"
              value="1.0"
            />
          </div>

          <div class="control-group">
            <label for="pitchControl" class="label">
              Pitch: <span id="pitchValue">1.0</span>
            </label>
            <input
              type="range"
              id="pitchControl"
              class="slider"
              min="0.5"
              max="1.5"
              step="0.1"
              value="1.0"
            />
          </div>
        </div>

        <div class="control-row">
          <div class="control-group">
            <label for="stabilityControl" class="label">
              Stability: <span id="stabilityValue">0.5</span>
            </label>
            <input
              type="range"
              id="stabilityControl"
              class="slider"
              min="0"
              max="1"
              step="0.1"
              value="0.5"
            />
          </div>

          <div class="control-group">
            <label for="clarityControl" class="label">
              Clarity: <span id="clarityValue">0.5</span>
            </label>
            <input
              type="range"
              id="clarityControl"
              class="slider"
              min="0"
              max="1"
              step="0.1"
              value="0.5"
            />
          </div>
        </div>
        <!-- Recording option removed. Downloads are available when server returns audio blob (NaturalReaders or other server-side TTS). -->
      </div>

      <div class="button-section">
        <button id="generateBtn" class="btn btn-primary">
          <span class="btn-icon">üéµ</span>
          Generate Speech
        </button>
        <button id="downloadBtn" class="btn btn-secondary" disabled>
          <span class="btn-icon">‚¨áÔ∏è</span>
          Download MP3
        </button>
        <div id="debugSentLang" class="debug-lang" aria-live="polite" style="margin-top:8px;font-size:0.9rem;color:#666">Sent: ‚Äî</div>
      </div>

      <div id="statusMessage" class="status-message"></div>

      <div id="audioPlayerSection" class="audio-player-section" style="display: none;">
        <h3 class="section-title">Preview Your Audio</h3>
        <div class="mini-player">
          <button id="playPauseBtn" class="mini-play" aria-label="Play">‚ñ∫</button>
          <input id="progressBar" type="range" min="0" max="100" value="0" class="mini-progress" aria-label="Progress" />
          <button id="muteBtn" class="mini-mute" aria-label="Mute">üîä</button>
        </div>
        <!-- Hidden audio element used for playback when server returns blob -->
        <audio id="audioPlayer" preload="auto" style="display:none"></audio>
      </div>

      <div id="historySection" class="history-section">
        <h3 class="section-title">Recent Conversions</h3>
        <div id="historyList" class="history-list"></div>
      </div>
    </main>

    <footer class="footer">
      <p>Powered by ElevenLabs API</p>
    </footer>
  </div>

  <div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner"></div>
    <p class="loading-text">Generating speech...</p>
  </div>

  <script type="module" src="/main.js"></script>
</body>
</html>
